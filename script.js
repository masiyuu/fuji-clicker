let cookies=0,cookiesPerSecond=0,totalCookies=0,facilities={受験生祖父:0,SOFTGAMES608:0,いつき:0,すばる:0,うどん:0,そふとコーポレーション:0,いるかスタジオ:0,NIGATENDO:0,そらみコーポレーション:0,ロボいつき:0,Jasper8se:0,"Rito Games":0,"SPIC Games":0,NITENDO:0},facilityPrices={受験生祖父:10,SOFTGAMES608:20,いつき:30,すばる:50,うどん:80,そふとコーポレーション:120,いるかスタジオ:160,NIGATENDO:210,そらみコーポレーション:260,ロボいつき:320,Jasper8se:390,"Rito Games":460,"SPIC Games":660,NITENDO:720};const facilityCookieProduction={受験生祖父:1,SOFTGAMES608:2,いつき:3,すばる:5,うどん:7,そふとコーポレーション:12,いるかスタジオ:15,NIGATENDO:18,そらみコーポレーション:28,ロボいつき:35,Jasper8se:48,"Rito Games":60,"SPIC Games":78,NITENDO:86},initialFacilityPrices={受験生祖父:10,SOFTGAMES608:20,いつき:30,すばる:50,うどん:80,そふとコーポレーション:120,いるかスタジオ:160,NIGATENDO:210,そらみコーポレーション:260,ロボいつき:320,Jasper8se:390,"Rito Games":460,"SPIC Games":660,NITENDO:720};let clickMultiplier=1.05,clickRateIncreasePrice=10;const clickSound=new Audio("https://media.masiyu.jp/masi/3cmHcgB6OSa");function clickCookie(){cookies+=clickMultiplier,totalCookies+=clickMultiplier,updateCookieDisplay(),loadClickRateIncreasePrice(),clickSound.currentTime=0,clickSound.play(),saveGameState()}function updateCookieDisplay(){let e=document.getElementById("cookieCount");e&&(e.textContent=formatNumber(cookies));let i=document.getElementById("totalCookies");i&&(i.textContent="総ふじい: "+formatNumber(totalCookies))}updateFacilityPrices(),updateFacilityDisplay(),setInterval(saveGameState,0),loadGameState();const totalCookiesDisplay=document.getElementById("totalCookies");if(totalCookiesDisplay){let e=calculateTotalCookies();totalCookiesDisplay.innerHTML=`総ふじい: ${e} ふじい`}function saveGameState(){let e={cookies:cookies,facilityPrices:facilityPrices,facilities:facilities,cookiesPerSecond:cookiesPerSecond,clickMultiplier:clickMultiplier,clickRateIncreasePrice:clickRateIncreasePrice};localStorage.setItem("gameState",JSON.stringify(e))}function loadGameState(){let e=localStorage.getItem("gameState");if(e){let i=JSON.parse(e);cookies=i.cookies,facilityPrices=i.facilityPrices,facilities=i.facilities,cookiesPerSecond=i.cookiesPerSecond,clickMultiplier=i.clickMultiplier,clickRateIncreasePrice=i.clickRateIncreasePrice}else facilityPrices=Object.assign({},initialFacilityPrices)}function updateCookieProductionDisplay(){let e=document.getElementById("perSecond");e&&(e.innerHTML=cookiesPerSecond+" ふじい/秒")}function updateFacilityPrices(){for(let e in facilityPrices)facilityPrices[e]=Math.ceil(initialFacilityPrices[e]*Math.pow(1.1,facilities[e]))}function updateFacilityDisplay(){let e=document.getElementById("facilityList");if(e)for(let i in e.innerHTML="",facilities){let t=document.createElement("li"),c=document.createElement("button");c.textContent=`${i} - ${facilities[i]} 個 (価格: ${facilityPrices[i]} ふじい)`,c.addEventListener("click",function(){buyFacility(i)}),t.appendChild(c),e.appendChild(t)}}function buyFacility(e){cookies>=facilityPrices[e]?(cookies-=facilityPrices[e],facilities[e]++,cookiesPerSecond+=facilityCookieProduction[e],updateCookieDisplay(),updateFacilityPrices(),updateFacilityDisplay(),updateCookieProductionDisplay()):alert("ふじいが足りません！")}function resetGameState(){confirm("ゲームの進行状況をリセットします。よろしいですか？")&&(localStorage.removeItem("gameState"),cookies=0,facilityPrices=Object.assign({},initialFacilityPrices),facilities={受験生祖父:0,SOFTGAMES608:0,いつき:0,すばる:0,うどん:0,そふとコーポレーション:0,いるかスタジオ:0,NIGATENDO:0,そらみコーポレーション:0,ロボいつき:0,Jasper8se:0,"Rito Games":0,"SPIC Games":0,NITENDO:0},clickMultiplier=1,totalCookies=0,cookiesPerSecond=0,clickRateIncreasePrice=10,updateCookieDisplay(),updateFacilityPrices(),updateFacilityDisplay(),updateCookieProductionDisplay())}updateCookieDisplay(),updateCookieProductionDisplay(),setInterval(function(){cookies+=cookiesPerSecond,totalCookies+=cookiesPerSecond,updateCookieDisplay(),saveTotalCookies()},1e3);const resetButton=document.getElementById("resetButton");function calculateTotalCookies(){let e=cookies;for(let i in facilities)e+=facilities[i]*facilityCookieProduction[i];for(let t in facilityPrices){let c=facilityPrices[t],o=facilities[t];e+=c*o}return e}function increaseClickRate(){cookies>=clickRateIncreasePrice?(cookies-=clickRateIncreasePrice,clickMultiplier++,clickRateIncreasePrice*=3,updateCookieDisplay(),updateIncreaseClickRateButton(),updateFacilityDisplay(),setClickMultiplier(clickMultiplier),setClickRateIncreasePrice(clickRateIncreasePrice)):alert("ふじいが足りません！")}function updateIncreaseClickRateButton(){let e=document.getElementById("increaseClickRateButton");e&&(e.textContent=`クリックの倍率を増加 (価格: ${clickRateIncreasePrice} ふじい)`)}function applyFacilityEffects(){for(let e in facilities)totalCookies+=facilities[e]*facilityCookieProduction[e]}function loadTotalCookies(){let e=localStorage.getItem("totalCookies");null!==e&&(totalCookies=parseFloat(e))}function saveTotalCookies(){localStorage.setItem("totalCookies",totalCookies.toString())}function formatNumber(e){return e>=1e4?toKanji(e):Math.floor(e)}function toKanji(e){if(isNaN(e))return"0";let i=["","万","億","兆","京","垓","\uD855\uDF71","穣","溝","澗","正"],t="",c=0;for(;e>0;){let o=e%1e4;0!==o&&(t=`${o}${i[c]}${t}`),e=Math.floor(e/1e4),c++}return t||"0"}function getClickRateIncreasePrice(){return parseInt(localStorage.getItem("clickRateIncreasePrice"))||10}function setClickRateIncreasePrice(e){localStorage.setItem("clickRateIncreasePrice",e)}function loadClickRateIncreasePrice(){let e=localStorage.getItem("clickRateIncreasePrice");e&&(clickRateIncreasePrice=parseInt(e))}resetButton.addEventListener("click",resetGameState),document.addEventListener("click",function(e){let i=document.createElement("div");i.classList.add("cookie"),i.style.left=e.clientX+"px",i.style.top=e.clientY+"px",document.body.appendChild(i),setTimeout(function(){i.remove()},3e3)}),loadTotalCookies(),loadClickRateIncreasePrice();
